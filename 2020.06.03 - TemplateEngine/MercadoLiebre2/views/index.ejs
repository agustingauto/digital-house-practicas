<!DOCTYPE html>
<html lang="en">
<%- include('partials/head.ejs') %>
<head>
	<title>Mercado Liebre Argentina</title>
</head>
<body>

	<%- include('partials/header.ejs') %>

	<!-- Banner -->
	<div class="banner"></div>
	<!-- /Banner -->

	<!-- Ofertas -->
	<div class="container products-wrapper">
		<div class="row">
			<div class="col-12">
				<h2 class="products-title">Ofertas</h2>
			</div>
			<% for(i in data) {  %>
				<% if (data[i].category == "in-sale") { %>
					<div class="col-12 col-sm-6 col-lg-6">
						<section class="product-box">
							<a href="http://localhost:3000/product/detail/<%= data[i].id%>/<%= data[i].category%>">
								<figure class="product-box_image">
									<img src="/images/<%= data[i].image %>" alt="imagen de producto">
								</figure>
								<article class="product-box_data">
									<% const toThousand = function (data) { 
										return data.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".") 
									} 
									const finalPrice = function (price) {
										return price - ((price*data[i].discount)/100)
									}
									%>
									<h2><%= toThousand(finalPrice(data[i].price)) %></h2>
									<span><%= data[i].discount + "% OFF" %></span>
									<p><%= data[i].name %></p>
									<i class="fas fa-truck"></i>
								</article>
							</a>
						</section>
					</div>
				<% } %>
			<% } %>
			
		</div>
	</div>
	<!-- /Ofertas -->

	<!-- ultima visita -->
	<div class="container products-wrapper">
		<div class="row">
			<div class="col-12">
				<h2 class="products-title">Basado en tu Ãºltima visita</h2>
			</div>
			<% for (i in data) { %>
				<% if (data[i].category == "visited") { %>
					<div class="col-12 col-sm-6 col-lg-3">
						<section class="product-box">
							<a href="http://localhost:3000/product/detail/<%= data[i].id%>/<%= data[i].category%>">
								<figure class="product-box_image">
									<img src="/images/<%=data[i].image%>" alt="imagen de producto">
								</figure>
								<article class="product-box_data">
									<% const toThousand = function (data) { 
										return data.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".") 
									} 
									const finalPrice = function (price) {
										return price - ((price*data[i].discount)/100)
									}
									%>
									<h2> <%= toThousand(finalPrice(data[i].price)) %></h2>
									<span><%= data[i].discount + "% OFF" %></span>
									<p><%= data[i].name %></p>
									<i class="fas fa-truck"></i>
								</article>
							</a>
						</section>
					</div>
				<% } %>
			<% } %>
		</div>
	</div>
	<!-- /ultima visita -->

	

	<%- include('partials/footer.ejs') %>
</body>
</html>